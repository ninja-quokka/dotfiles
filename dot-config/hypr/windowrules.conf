# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
windowrule {
  name = windowrule-1
  suppress_event = maximize
  opacity = 0.97 0.9
  match:class = .*
}


# Just dash of opacity by default

# Fix some dragging issues with XWayland
windowrule {
  name = windowrule-2
  no_focus = on
  match:class = ^$
  match:title = ^$
  match:xwayland = 1
  match:float = 1
  match:fullscreen = 0
  match:pin = 0
}


# App-specific tweaks
windowrule {
  name = windowrule-3
  no_screen_share = on
  match:class = ^(Bitwarden)$
}


# Browser types
windowrule {
  name = windowrule-4
  tag = +chromium-based-browser
  match:class = ((google-)?[cC]hrom(e|ium)|[bB]rave-browser|Microsoft-edge|Vivaldi-stable|helium)
}

windowrule {
  name = windowrule-5
  tag = +firefox-based-browser
  match:class = ([fF]irefox|org\.mozilla\.firefox|zen|librewolf)
}

# Force chromium-based browsers into a tile to deal with --app bug
windowrule {
  name = windowrule-6
  tile = on
  opacity = 1 0.97
  workspace = name:B
  match:tag = chromium-based-browser
}

# Only a subtle opacity change, but not for video sites
windowrule {
  name = windowrule-7
  opacity = 1 0.97
  workspace = name:B
  match:tag = firefox-based-browser
}

# Some video sites should never have opacity applied to them
windowrule {
  name = windowrule-8
  opacity = 1.0 1.0
  match:initial_title = ((?i)(?:[a-z0-9-]+\.)*youtube\.com_/|app\.zoom\.us_/wc/home)
}

# Remove 1px border around hyprshot screenshots
layerrule {
  name = layerrule-1
  no_anim = on
  match:namespace = selection
}

# Float LocalSend and fzf file picker
windowrule {
  name = windowrule-9
  float = on
  center = on
  match:class = (Share|localsend)
}

# Picture-in-picture overlays
windowrule {
  name = windowrule-10
  tag = +pip
  match:title = (Picture.?in.?[Pp]icture)
}

windowrule {
  name = windowrule-11
  float = on
  pin = on
  size = 600 338
  keep_aspect_ratio = on
  border_size = 0
  opacity = 1 1
  move = ((monitor_w*1)-window_w-40) ((monitor_h*0.04))
  match:tag = pip
}

windowrule {
  name = windowrule-12
  opacity = 1 1
  match:class = qemu
}


windowrule {
  name = windowrule-13
  fullscreen = on
  opacity = 1 1
  idle_inhibit = fullscreen
  match:class = com.libretro.RetroArch
}

# Float Steam
windowrule {
  name = windowrule-14
  float = on
  opacity = 1 1
  idle_inhibit = fullscreen
  match:class = steam
}

windowrule {
  name = windowrule-15
  center = on
  size = 1100 700
  match:class = steam
  match:title = Steam
}

windowrule {
  name = windowrule-16
  size = 460 800
  match:class = steam
  match:title = Friends List
}

# Floating windows
windowrule {
  name = windowrule-17
  float = on
  center = on
  size = 875 600
  match:tag = floating-window
}

windowrule {
  name = windowrule-18
  tag = +floating-window
  match:class = (blueberry.py|com.omarchy.Impala|com.omarchy.Wiremix|com.omarchy.Omarchy|org.gnome.NautilusPreviewer|com.gabm.satty|Omarchy|About|TUI.float)
}

windowrule {
  name = windowrule-19
  tag = +floating-window
  match:class = (xdg-desktop-portal-gtk|sublime_text|DesktopEditors|org.gnome.Nautilus)
  match:title = ^(Open.*Files?|Open [F|f]older.*|Save.*Files?|Save.*As|Save|All Files|.*wants to [open|save].*|[C|c]hoose.*)
}

windowrule {
  name = windowrule-20
  float = on
  match:class = org.gnome.Calculator
}

# Fullscreen screensaver
windowrule {
  name = windowrule-21
  fullscreen = on
  match:class = Screensaver
}

# No transparency on media windows
windowrule {
  name = windowrule-22
  opacity = 1 1
  match:class = ^(zoom|vlc|mpv|org.kde.kdenlive|com.obsproject.Studio|com.github.PintaProject.Pinta|imv|org.gnome.NautilusPreviewer)$
}

# Popped window rounding
windowrule {
  name = windowrule-23
  rounding = 8
  match:tag = pop
}

# Define terminal tag to style them uniformly
windowrule {
  name = windowrule-24
  tag = +terminal
  match:class = (Alacritty|kitty|com.mitchellh.ghostty)
}

# Webcam overlay for screen recording
windowrule {
  name = windowrule-25
  float = on
  pin = on
  no_initial_focus = on
  no_dim = on
  match:title = WebcamOverlay
}

windowrule {
  name = windowrule-26
  move = ((monitor_w*1)-window_w-40) ((monitor_h*1)-window_h-40)
  match:title = WebcamOverlay # There's a typo in the hyprland rule so 100%-w on the height param is actually correct here
}

# Route where windows go upon launch
windowrule {
  name = windowrule-27
  workspace = name:B
  match:class = ^(firefox)$
}
